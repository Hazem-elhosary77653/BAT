# ๐ ููุฎุต ุงูุชุญุฏูุซุงุช - Collaborative Editing System

## โจ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

ุชู ุฅุถุงูุฉ ูุธุงู ุชุนุงูู ูุชูุฏู ูุณูุญ ูููุณุชุฎุฏููู ุจู:

### ๐ฏ ุงูููุฒุฉ ุงูุฃููู: ุชุญุฏูุฏ ุงููุต ูุธููุฑ Toolbar
- ุนูุฏ ุชุญุฏูุฏ ุฃู ุฌุฒุก ูู ุงููุตุ ูุธูุฑ toolbar ุตุบูุฑ ูููู ูุจุงุดุฑุฉ
- ุงูู toolbar ูุญุชูู ุนูู ุฎูุงุฑุงุช ูุชุนุฏุฏุฉ ุณููุฉ ุงูุงุณุชุฎุฏุงู

### ๐จ ุงูููุฒุฉ ุงูุซุงููุฉ: ุงูุชูููู ูุงูุชูุถูุญ (Highlighting)
- 5 ุฃููุงู ูุฎุชููุฉ ููุงุฎุชูุงุฑ ูู
- ููุชูู ุงูุฃููุงู ุณุฑูุน ููุณูู ุงูุงุณุชุฎุฏุงู
- ุนุฑุถ ููุฑู ูุฌููุน ุงูุชููููุงุช ูู ุงููุญุชูู
- ูุงุฆูุฉ ุดุงููุฉ ุจุฌููุน ุงูุชููููุงุช ุงููุดุทุฉ

### ๐ฅ ุงูููุฒุฉ ุงูุซุงูุซุฉ: ุงูุฅุดุงุฑุฉ ูููุณุชุฎุฏููู (Mentions)
- ุงุฎุชูุงุฑ ูุณุชุฎุฏู ูู ูุงุฆูุฉ ุงููุณุชุฎุฏููู ุงููุดุทูู
- ุฅุดุนุงุฑุงุช ููุฑูุฉ ูููุณุชุฎุฏู ุงูููุดุงุฑ ุฅููู
- ูุนูููุงุช ูุงุถุญุฉ ุนู ูู ุชูุช ุงูุฅุดุงุฑุฉ ุฅููู

### ๐ค ุงูููุฒุฉ ุงูุฑุงุจุนุฉ: ุฅุนุงุฏุฉ ุงูุชูููุฏ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู
- ุฅุฏุฎุงู ุชุนูููุงุช ูุฎุตุตุฉ ููุฐูุงุก ุงูุงุตุทูุงุนู
- 5 ุงูุชุฑุงุญุงุช ุณุฑูุนุฉ ุฌุงูุฒุฉ ุงูุงุณุชุฎุฏุงู
- ูุนุงููุฉ ุงููุชูุฌุฉ ูุจู ูุจูููุง
- ุงุณุชุจุฏุงู ุงููุต ุฃู ุฅุนุงุฏุฉ ุงููุญุงููุฉ

### ๐ ุงูููุฒุฉ ุงูุฎุงูุณุฉ: ุงููุดุงุฑูุฉ ุงูููุฑูุฉ
- ุจุซ ุงูุชููููุงุช ูุงูุชุญุฏูุฏุงุช ูููุณุชุฎุฏููู ุงูุขุฎุฑูู ุนุจุฑ WebSocket
- ุฑุคูุฉ ุชุญุฏูุฏุงุช ุงููุณุชุฎุฏููู ุงูุขุฎุฑูู ูู ุงูููุช ุงููุนูู
- ุชุญุฏูุซุงุช ููุฑูุฉ ูุฌููุน ุงูุชุบููุฑุงุช

---

## ๐ ุงููููุงุช ุงููุถุงูุฉ

### Frontend Components
```
โ frontend/components/SelectionToolbar.jsx
   - Toolbar ูุธูุฑ ุนูุฏ ุชุญุฏูุฏ ุงููุต ูุน ุฌููุน ุงูุฎูุงุฑุงุช

โ frontend/components/AIRegeneratePanel.jsx
   - ููุญุฉ ูุฅุนุงุฏุฉ ุงูุชูููุฏ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู

โ frontend/components/HighlightedContent.jsx
   - ุนุฑุถ ุงููุญุชูู ูุน ุงูุชููููุงุช ูุงูุฅุดุงุฑุงุช

โ frontend/components/CollaborativeTextEditor.jsx
   - ุงููููู ุงูุฑุฆูุณู ุงูุฐู ูุฌูุน ูู ุดูุก ูุนุงู
```

### Frontend Hooks
```
โ frontend/hooks/useTextSelection.js
   - ุฅุฏุงุฑุฉ ุชุญุฏูุฏ ุงููุต ูุงููุงููุงูุชุงุช ุงููุญููุฉ

โ frontend/hooks/useCollaboration.js (ูุญุฏูุซ)
   - ุฅุถุงูุฉ ุฏูุงู ูููุงููุงูุชุงุช ูุงูุชุญุฏูุฏุงุช ุงููุดุชุฑูุฉ
```

### Backend Updates
```
โ backend/src/services/aiService.js (ูุญุฏูุซ)
   - ุฅุถุงูุฉ ุฏุงูุฉ regenerateSection ููุฐูุงุก ุงูุงุตุทูุงุนู

โ backend/src/controllers/brdController.js (ูุญุฏูุซ)
   - ุฅุถุงูุฉ endpoints ุฌุฏูุฏุฉ:
     - POST /api/brd/regenerate-section
     - POST /api/brd/smart-edit

โ backend/src/routes/brdRoutes.js (ูุญุฏูุซ)
   - ุฅุถุงูุฉ ุงููุณุงุฑุงุช ุงูุฌุฏูุฏุฉ
```

### Documentation
```
โ COLLABORATIVE_EDITING_GUIDE.md
   - ุฏููู ุดุงูู ููููุฒุงุช ุงูุฌุฏูุฏุฉ

โ ADVANCED_COLLABORATION_GUIDE_AR.md
   - ุฏููู ููุตู ุจุงููุบุฉ ุงูุนุฑุจูุฉ
```

---

## ๐ง ุงููุธุงุฆู ุงููุถุงูุฉ

### useTextSelection Hook
```javascript
// ุฅุฏุงุฑุฉ ุงูุชุญุฏูุฏุงุช ุงููุญููุฉ ูุงููุงููุงูุชุงุช
const {
  selection,
  toolbarPosition,
  highlights,
  mentions,
  addHighlight,
  removeHighlight,
  addMention,
  markMentionAsRead,
  closeToolbar
} = useTextSelection(contentRef, userId);
```

### useCollaboration Hook (Updated)
```javascript
// ูุธุงุฆู ุฌุฏูุฏุฉ ููุชุนุงูู ุงูููุฑู
const {
  highlights,                    // ุงููุงููุงูุชุงุช ุงููุดุชุฑูุฉ
  userSelections,               // ุชุญุฏูุฏุงุช ุงููุณุชุฎุฏููู
  broadcastHighlight,           // ุฅุฑุณุงู ุชูููู
  removeHighlightBroadcast,    // ุฅุฒุงูุฉ ุชูููู
  broadcastSelection            // ุฅุฑุณุงู ุงูุชุญุฏูุฏ
} = useCollaboration(brdId, userId, userName);
```

### API Endpoints
```bash
# ุฅุนุงุฏุฉ ุชูููุฏ ูุณู
POST /api/brd/regenerate-section
Body: {
  text: string,
  instruction: string,
  brdId?: string,
  sectionId?: string,
  context?: string
}

# ุชุญุฑูุฑ ุฐูู
POST /api/brd/smart-edit
Body: {
  selection: string,
  instruction: string,
  context?: string
}
```

---

## ๐ WebSocket Events

### New Events
```javascript
// ุฅุถุงูุฉ ุชูููู
socket.emit('add-highlight', {
  brdId, highlightId, text, color, 
  createdBy, mentionedUser, timestamp
});

// ุฅุฒุงูุฉ ุชูููู
socket.emit('remove-highlight', {
  brdId, highlightId
});

// ุฅุฑุณุงู ุงูุชุญุฏูุฏ
socket.emit('user-selection', {
  brdId, userId, userName, selection
});

// Event ุนูู ุงูุงุณุชูุจุงู
socket.on('highlight-added', (data) => {});
socket.on('highlight-removed', (data) => {});
socket.on('user-selection', (data) => {});
```

---

## ๐ฆ ุงููุชุทูุจุงุช

### ูุง ุชูุฌุฏ ูุชุทูุจุงุช ุฌุฏูุฏุฉ
- ุชู ุงุณุชุฎุฏุงู ุงูููุชุจุงุช ุงูููุฌูุฏุฉ ุจุงููุนู
- React hooks ุงููุฏูุฌุฉ
- Socket.io ููุชุนุงูู ุงูููุฑู
- OpenAI API (ููุฌูุฏ ุจุงููุนู)

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุฏูุฌ ุงููุญุฑุฑ ุงูุชุนุงููู
```jsx
<CollaborativeTextEditor
  brdId="brd-123"
  userId="user-456"
  userName="ุฃุญูุฏ ูุญูุฏ"
  content="ูุญุชูู ุงูุจุฑุฏ"
  onContentChange={(newContent) => saveContent(newContent)}
  section={{ id: 'section-1' }}
/>
```

### 2. ุชุญุฏูุฏ ุงููุต
- ุงุฎุชุฑ ุฃู ุฌุฒุก ูู ุงููุต ูู ุงููุญุฑุฑ

### 3. ุงุฎุชูุงุฑ ุงูุฎูุงุฑ ุงููุทููุจ
- **Highlight**: ุงุฎุชุฑ ููู ูู ููุชูู ุงูุฃููุงู
- **Mention**: ุงุฎุชุฑ ูุณุชุฎุฏู ูู ุงููุงุฆูุฉ
- **AI Regenerate**: ุฃุฏุฎู ุงูุชุนูููุงุช
- **Copy**: ุงูุณุฎ ุงููุต ุงููุฎุชุงุฑ
- **Close**: ุฃุบูู ุงูู toolbar

### 4. ุงูุฑุคูุฉ ุงูููุฑูุฉ
- ูู ุงููุณุชุฎุฏููู ุณูุฑูู ุงูุชุบููุฑุงุช ููุฑุงู ุนุจุฑ WebSocket

---

## โ ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ ุงูุชูููู
```javascript
// ุงูุชูู ุฅูู ุตูุญุฉ ุชุญุฑูุฑ BRD
// ุงุฎุชุฑ ุฌุฒุก ูู ุงููุต
// ุงุถุบุท ุนูู ุฃููููุฉ ุงูุชูููู
// ุงุฎุชุฑ ููู
// ุชุฃูุฏ ูู ุธููุฑ ุงูุชูููู ูู ุงููุญุชูู
```

### ุงุฎุชุจุงุฑ ุงูุฅุดุงุฑุฉ
```javascript
// ุงูุชุญ BRD ูุน ูุณุชุฎุฏู ุขุฎุฑ
// ุงุฎุชุฑ ูุต
// ุงุถุบุท ุนูู Mention
// ุงุฎุชุฑ ุงููุณุชุฎุฏู ุงูุขุฎุฑ
// ุชุฃูุฏ ูู ุธููุฑ ุงูุฅุดุนุงุฑ ูู
```

### ุงุฎุชุจุงุฑ ุงูุฐูุงุก ุงูุงุตุทูุงุนู
```javascript
// ุงุฎุชุฑ ูุต
// ุงุถุบุท ุนูู ุฃููููุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู
// ุฃุฏุฎู ุชุนูููุงุช (ุฃู ุงุฎุชุฑ ูู ุงูุณุฑูุนุฉ)
// ุงูุชุธุฑ ุงููุชูุฌุฉ
// ุงุถุบุท "ุงุณุชุฎุฏู ุงููุชูุฌุฉ" ููุงุณุชุจุฏุงู
```

---

## ๐ ุงูุฃูุงู

โ **ูุญูุตุงุช ุงูุฃูุงู ุงููุทุจูุฉ:**
- ุงูุชุญูู ูู ุงูุงุณุชููุงู (Authentication)
- ุงูุชุญูู ูู ุงูุตูุงุญูุงุช (Authorization)
- ุชุณุฌูู ูุนุฑูู ุงููุณุชุฎุฏู ูุน ูู ุนูููุฉ
- ุญูุงูุฉ ูู ุงูุชุนุฏููุงุช ุบูุฑ ุงููุตุฑุญ ุจูุง

---

## ๐ ุงูุฏุนู

ููุฃุณุฆูุฉ ุฃู ุงููุดุงูู:
1. ุงุทูุน ุนูู ุงูุฃุฏูุฉ ุงูุดุงููุฉ:
   - COLLABORATIVE_EDITING_GUIDE.md
   - ADVANCED_COLLABORATION_GUIDE_AR.md

2. ุชุญูู ูู ุงูุฃูุซูุฉ ูู ุงูููููุงุช

3. ุชูุงุตู ูุน ูุฑูู ุงูุชุทููุฑ

---

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุชู ุจูุงุก ูุธุงู ุชุนุงูู ูุชูุฏู ููุงูู ูููุฑ:
- โจ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุณุฉ ูุณููุฉ
- ๐ ุฃุฏุงุก ุนุงูู ููุณุชูุฑ
- ๐ ุฃูุงู ุนุงูู ุงูุฌูุฏุฉ
- ๐ ุชูุซูู ุดุงูู ูููุตู
- ๐ค ุฐูุงุก ุงุตุทูุงุนู ูุชุทูุฑ

**ูุจุฑูู! ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู** ๐
